# 일정 관리 캘린더 시스템

## 기능 개요

일정을 추가, 수정, 삭제하고 주간/월간 뷰로 확인할 수 있으며, 검색, 겹침 경고, 알림 기능을 제공하는 캘린더 애플리케이션입니다.

## 상세 요구사항

### 1. 일정 관리 기능

#### 1.1. 일정 추가

1.1.1. 필수 입력 항목

- 제목: 텍스트 입력 필드
- 날짜: 날짜 선택기 (YYYY-MM-DD 형식)
- 시작 시간: 시간 선택기 (HH:MM 형식)
- 종료 시간: 시간 선택기 (HH:MM 형식)

  1.1.2. 선택 입력 항목

- 설명: 텍스트 입력 필드
- 위치: 텍스트 입력 필드
- 카테고리: 드롭다운 선택 (업무, 개인, 가족, 기타)
- 알림 설정: 드롭다운 선택 (1분 전, 10분 전, 1시간 전, 2시간 전, 1일 전)
- 반복 일정: 체크박스 (현재 비활성화, 8주차 과제 예정)

  1.1.3. 일정 저장

- "일정 추가" 버튼 클릭 시 필수 항목 검증
- 필수 항목 미입력 시 에러 스낵바 표시: "필수 정보를 모두 입력해주세요."
- 시간 유효성 검증 실패 시 에러 스낵바 표시: "시간 설정을 확인해주세요."
- 일정 겹침 검사 수행
- 겹침 없을 경우 일정 저장 및 폼 초기화
- 저장된 일정은 이벤트 리스트와 캘린더 뷰에 즉시 반영

  1.1.4. 일정 저장 후 표시

- 저장된 일정은 이벤트 리스트에 다음과 같이 표시:
  - 제목
  - 날짜
  - 시작 시간 - 종료 시간
  - 설명
  - 위치
  - 카테고리
  - 알림 설정

#### 1.2. 일정 수정

1.2.1. 일정 선택

- 이벤트 리스트에서 편집 아이콘 클릭
- 폼에 기존 일정 정보 자동 채움
- 폼 제목이 "일정 수정"으로 변경

  1.2.2. 일정 정보 변경

- 모든 필드 수정 가능
- 필수 항목 및 시간 유효성 검증 동일하게 적용

  1.2.3. 일정 업데이트

- "일정 수정" 버튼 클릭 시 변경사항 저장
- 일정 겹침 검사 수행 (자신 제외)
- 저장된 변경사항 즉시 반영

#### 1.3. 일정 삭제

1.3.1. 삭제 실행

- 이벤트 리스트에서 삭제 아이콘 클릭
- 삭제 확인 없이 즉시 삭제
- 삭제된 일정은 이벤트 리스트와 캘린더 뷰에서 제거

### 2. 캘린더 뷰 기능

#### 2.1. 뷰 타입 전환

2.1.1. 주간 뷰

- 뷰 타입 선택 드롭다운에서 "Week" 선택
- 선택된 주의 7일간 날짜를 테이블로 표시
- 일요일부터 토요일까지 열 구성
- 각 날짜 셀에 날짜 번호 표시
- 해당 날짜의 일정을 셀 내에 표시

  2.1.2. 월간 뷰

- 뷰 타입 선택 드롭다운에서 "Month" 선택
- 현재 월의 모든 주를 테이블로 표시
- 주 단위 행 구성, 각 주는 일요일부터 토요일까지 열 구성
- 해당 월에 속하지 않는 날짜는 빈 셀로 표시
- 각 날짜 셀에 날짜 번호 표시
- 해당 날짜의 일정을 셀 내에 표시
- 공휴일 표시: 공휴일인 경우 날짜 아래 빨간색 텍스트로 공휴일 이름 표시

#### 2.2. 날짜 네비게이션

2.2.1. 다음/이전 이동

- 왼쪽 화살표(이전) 버튼 클릭 시 현재 선택된 날짜 기준 이전 주/월로 이동
- 오른쪽 화살표(다음) 버튼 클릭 시 현재 선택된 날짜 기준 다음 주/월로 이동
- 이동 후 해당 기간의 일정이 뷰에 반영

  2.2.2. 뷰별 네비게이션 동작

- 주간 뷰: 이전/다음 버튼 클릭 시 1주일 단위 이동
- 월간 뷰: 이전/다음 버튼 클릭 시 1개월 단위 이동

#### 2.3. 일정 표시

2.3.1. 뷰별 일정 필터링

- 주간 뷰: 선택된 주(일요일~토요일)에 속한 일정만 표시
- 월간 뷰: 선택된 월에 속한 일정만 표시

  2.3.2. 일정 표시 형식

- 각 날짜 셀 내에 일정 제목 표시
- 알림 대상 일정은 빨간색으로 강조 및 알림 아이콘 표시
- 일정 박스 배경색:
  - 알림 대상: #ffebee (연한 빨간색)
  - 일반: #f5f5f5 (연한 회색)
- 일정 텍스트 스타일:
  - 알림 대상: 볼드체, 빨간색 (#d32f2f)
  - 일반: 기본 스타일

### 3. 검색 기능

#### 3.1. 검색어 입력

3.1.1. 검색 입력 필드

- "일정 검색" 레이블의 텍스트 입력 필드
- placeholder: "검색어를 입력하세요"
- 실시간 입력 값 반영

#### 3.2. 검색 필터링

3.2.1. 검색 범위

- 일정 제목에서 검색어 포함 여부 확인
- 대소문자 구분 없음 (대소문자 무시)

  3.2.2. 검색 결과 표시

- 검색어에 매칭되는 일정만 이벤트 리스트에 표시
- 검색어에 매칭되는 일정만 캘린더 뷰에 표시
- 현재 뷰 타입(주간/월간)에 맞게 필터링된 검색 결과 표시

#### 3.3. 검색 초기화

3.3.1. 검색어 삭제

- 검색어 입력 필드의 모든 텍스트 삭제
- 검색어가 비어있으면 모든 일정 다시 표시

#### 3.4. 검색 결과 없음

3.4.1. 빈 결과 처리

- 검색어에 매칭되는 일정이 없을 경우
- 이벤트 리스트에 "검색 결과가 없습니다." 텍스트 표시

### 4. 일정 겹침 검증

#### 4.1. 겹침 감지

4.1.1. 겹침 판단 기준

- 새로운 일정의 날짜와 시작/종료 시간 범위 확인
- 기존 일정들과 시간 범위가 겹치는지 검사
- 겹침 조건: 시작 시간 < 다른 일정의 종료 시간 && 다른 일정의 시작 시간 < 종료 시간
- 수정 시: 자신을 제외한 다른 일정과의 겹침만 검사

#### 4.2. 겹침 경고 다이얼로그

4.2.1. 다이얼로그 표시 조건

- 일정 추가 또는 수정 시 겹치는 일정이 발견되면 다이얼로그 표시
- 겹치지 않으면 즉시 저장 진행

  4.2.2. 다이얼로그 내용

- 제목: "일정 겹침 경고"
- 메시지: "다음 일정과 겹칩니다:" 뒤에 겹치는 일정 목록 표시
- 각 겹치는 일정 정보:

  - 제목
  - 날짜
  - 시작 시간 - 종료 시간

  4.2.3. 다이얼로그 액션

- "취소" 버튼: 다이얼로그 닫기, 저장 취소, 폼 유지
- "계속 진행" 버튼: 다이얼로그 닫기, 겹침 무시하고 저장 진행

### 5. 알림 기능

#### 5.1. 알림 설정

5.1.1. 알림 시간 옵션

- 1분 전
- 10분 전
- 1시간 전
- 2시간 전
- 1일 전
- 알림 없음 (0분)

  5.1.2. 알림 시간 저장

- 일정 추가/수정 시 선택한 알림 시간 저장
- 일정 정보에 notificationTime 필드로 저장

#### 5.2. 알림 표시

5.2.1. 알림 트리거

- 1초마다 일정을 확인하여 알림 시간이 도래한 일정 감지
- 알림 시간 = 일정 시작 시간 - 설정된 알림 시간

  5.2.2. 알림 메시지

- 알림 메시지 형식: "[일정 제목] 일정이 [알림 시간] 후 시작됩니다."
- 예: "팀 회의 일정이 10분 후 시작됩니다."
- 알림은 한 번만 표시 (중복 알림 방지)

  5.2.3. 알림 UI 표시

- 알림 메시지는 화면 우측 상단에 고정 위치로 표시
- Alert 컴포넌트로 표시, severity="info"
- 알림 아이콘 표시
- 일정 제목은 AlertTitle으로 표시
- 닫기 버튼 제공

  5.2.4. 알림 상태 표시

- 알림이 표시된 일정은:
  - 이벤트 리스트에서 빨간색 알림 아이콘과 볼드체로 표시
  - 캘린더 뷰에서 빨간색 강조 및 알림 아이콘 표시

#### 5.3. 알림 닫기

5.3.1. 알림 제거

- 알림의 닫기 버튼 클릭 시 해당 알림만 제거
- 다른 알림은 계속 표시 유지

### 6. 시간 유효성 검증

#### 6.1. 시간 검증 규칙

6.1.1. 시작 시간 검증

- 시작 시간이 종료 시간보다 늦거나 같으면 에러
- 에러 메시지: "시작 시간은 종료 시간보다 빨라야 합니다."
- 에러 상태는 시작 시간 입력 필드에 빨간색 테두리로 표시
- Tooltip으로 에러 메시지 표시

  6.1.2. 종료 시간 검증

- 종료 시간이 시작 시간보다 빠르거나 같으면 에러
- 에러 메시지: "종료 시간은 시작 시간보다 늦어야 합니다."
- 에러 상태는 종료 시간 입력 필드에 빨간색 테두리로 표시
- Tooltip으로 에러 메시지 표시

  6.1.3. 검증 시점

- 시간 입력 필드 onBlur 이벤트 시 검증 수행
- 일정 저장 버튼 클릭 시 재검증 수행

  6.1.4. 유효한 시간 조건

- 시작 시간이 종료 시간보다 빠르면 검증 통과
- 검증 통과 시 에러 상태 해제

### 7. 공휴일 표시

#### 7.1. 공휴일 데이터 조회

7.1.1. 공휴일 API 호출

- 초기 로드 시 또는 날짜 변경 시 공휴일 API 호출
- API 엔드포인트: `/api/holidays`
- 년도별 공휴일 정보 조회

#### 7.2. 공휴일 표시

7.2.1. 월간 뷰에서 공휴일 표시

- 해당 날짜가 공휴일인 경우
- 날짜 번호 아래 빨간색 텍스트로 공휴일 이름 표시
- 예: "신정", "설날", "추석" 등

### 특수 케이스

1. 반복 일정 기능

   - 반복 일정 체크박스는 UI에 표시되지만 현재 비활성화 상태
   - 주석 처리된 코드 존재
   - 8주차 과제에서 구현 예정

2. 빈 상태 처리

   - 일정이 없고 검색 결과도 없을 때: "검색 결과가 없습니다." 메시지 표시
   - 캘린더 뷰에서 일정이 없는 날짜는 빈 셀로 표시

3. 날짜 경계 처리
   - 주간 뷰: 선택된 날짜가 속한 주(일요일~토요일)의 일정만 표시
   - 월간 뷰: 선택된 월에 속한 일정만 표시
   - 다른 월/주에 속한 일정은 표시하지 않음

### 에러 처리

1. 필수 항목 미입력

   - 제목, 날짜, 시작 시간, 종료 시간 중 하나라도 비어있으면 저장 불가
   - 에러 스낵바: "필수 정보를 모두 입력해주세요."

2. 시간 유효성 검증 실패

   - 시작 시간 >= 종료 시간일 경우 저장 불가
   - 에러 스낵바: "시간 설정을 확인해주세요."

3. 네트워크 오류
   - 일정 저장/삭제/조회 시 네트워크 오류 발생 가능
   - 에러 처리 로직 필요 (현재 구현 확인 필요)

### 제약사항

1. 반복 일정 기능은 현재 구현되지 않음

   - 반복 유형, 반복 간격, 반복 종료일 설정 불가
   - 반복 일정 관련 UI는 주석 처리됨

2. 로컬 스토리지 또는 API 기반 데이터 저장

   - 일정 데이터는 API를 통해 저장/조회

3. 알림 기능은 브라우저 환경에서 실행
   - 실제 알림은 1초 간격으로 폴링 방식으로 체크

## 기술적 맥락

- **프레임워크**: React 19.1.0
- **UI 라이브러리**: Material UI 7.2.0
- **상태 관리**: React Hooks (useState, useEffect)
- **테스트**: Vitest, Testing Library
- **데이터 저장**: API 엔드포인트 사용 (MSW로 모킹)
- **타입 시스템**: TypeScript (strict mode)
