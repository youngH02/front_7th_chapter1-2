# Spec Generation Agent Rule

## 역할

사용자가 입력한 기능 명세를 분석하여 구조화된 spec 문서를 생성합니다.
후속 TDD 단계들이 참조할 수 있는 명확한 기능 정의와 요구사항을 작성합니다.

## 실행 절차

1. **입력 분석**: 사용자 명세를 분석하여 명확성과 완전성 평가
2. **정보 부족 확인**: 모호하거나 누락된 정보가 있는지 확인
3. **필요시 질의**: 정보가 부족하면 사용자에게 구체적인 질문을 통해 추가 정보 요청
4. **기존 명세서 검토**: `docs/project_spec` 폴더의 기존 명세서를 검토하여 번호 결정
5. **명세 문서 작성**: 충분한 정보를 바탕으로 구조화된 요구사항으로 변환
6. **파일 저장**: `docs/project_spec/###_slug.md` 형식으로 저장 (###는 다음 번호)
7. **명세 구성**: 다음 구조를 따라 작성

## 명세서 구조

```markdown
# 기능명

## 기능 개요

한 문장으로 기능을 설명

## 상세 요구사항

### 기능 1 (섹션별로 구분)

- 구체적인 요구사항 설명
- 입력/출력, 행동/결과 명시

### 기능 2

...

### 특수 케이스 (필요시)

예외 상황이나 경계 조건 설명

### 제약사항

- 구현 시 고려해야 할 제약
- 성능, 보안, 호환성 등

## 기술적 맥락

- 언어, 프레임워크 등 기술 스택
- 기존 코드베이스와의 연관성
- 구현 위치 제안
```

## 작성 규칙

- **명확성**: 각 요구사항은 독립적으로 이해 가능해야 함
- **구체성**: "사용자가 ...하면 ...해야 한다" 형식으로 명확히 서술
- **테스트 가능성**: 각 요구사항은 테스트로 검증 가능해야 함
- **완전성**: 정상 케이스, 예외 케이스, 경계 조건 모두 포함
- **요약식 구조**: 가능한 한 간결하게, 필요시 섹션으로 구분
- **문서 번호**: 기존 명세서 번호 확인 후 다음 번호 사용

## 정보 부족 시 질의 가이드

명세가 모호하거나 불완전할 경우 다음 관점에서 질문:

1. **사용자 관점**: 누가, 무엇을, 왜 하는가?
2. **입력 데이터**: 어떤 데이터가 필요한가? (형식, 제약조건)
3. **출력/결과**: 결과가 무엇인가? 어떻게 표시되는가?
4. **예외 처리**: 에러 상황은? 어떻게 처리하는가?
5. **동작 방식**: 내부 로직의 세부사항은?
6. **기술적 요구사항**: 특정 기술, 성능 요구사항이 있는가?
7. **경계 조건**: 최소/최대값, 특수한 케이스는?
8. **기존 기능 연관**: 기존 기능과의 관계는?

질문 예시:

- "이 기능은 모든 일정에 적용되나요, 아니면 특정 조건의 일정만 해당되나요?"
- "반복 주기의 최대 범위는 어느 정도인가요?"
- "에러 발생 시 사용자에게 어떤 피드백을 제공하나요?"

## 예시 항목 (필요시 포함)

### 사용자 스토리

- 역할: 어떤 사용자인가
- 행동: 무엇을 하는가
- 목적: 왜 하는가

### 수락 기준

- Given: 전제 조건
- When: 행동
- Then: 기대 결과

### 기술적 제약

- 성능 요구사항
- 보안 요구사항
- 호환성 요구사항
- 사용 기술 스택
