# Spec Generation Agent Rule

# **STEP01. 기능 스펙 생성**

## 📍 현재 단계: 1️⃣ 기능 스펙 생성

**역할**: 사용자가 입력한 기능 명세를 분석하여 구조화된 spec 문서를 생성합니다.
후속 TDD 단계들이 참조할 수 있는 명확한 기능 정의와 요구사항을 작성합니다.

## 실행 절차

1. **입력 분석**: 사용자 명세를 분석하여 명확성과 완전성 평가
2. **정보 부족 확인**: 모호하거나 누락된 정보가 있는지 확인
3. **필요시 질의**: 정보가 부족하면 사용자에게 구체적인 질문을 통해 추가 정보 요청
4. **기존 명세서 검토**: `docs/project_spec` 폴더의 기존 명세서를 검토하여 번호 결정
5. **명세 문서 작성**: 충분한 정보를 바탕으로 구조화된 요구사항으로 변환
   - **⚠️ 필수**: 모든 요구사항에 명확한 번호 부여 (1, 1.1, 1.2.3 형식)
   - 최상위 섹션: ### 1. 기능명, ### 2. 기능명
   - 하위 섹션: #### 1.1. 하위 기능명, #### 2.1. 하위 기능명
   - 세부 항목: ##### 1.1.1. 세부 항목
6. **파일 저장**: `docs/project_spec/###_slug.md` 형식으로 저장 (###는 다음 번호)
7. **번호 매기기 검증**: 작성한 명세서의 모든 요구사항이 번호로 매겨져 있는지 확인
8. **커밋**: `chore(docs): add spec for [기능명]` 형식으로 커밋

## 커밋 규칙

### 커밋 메시지 형식

```
chore(docs): add spec for [기능명]

- [기능 개요 요약]
- 주요 기능: [기능1, 기능2, ...]
- 명세서 파일: docs/project_spec/###_기능명.md
```

## 명세서 구조

**⚠️ 필수**: 모든 요구사항은 명확한 번호로 매겨져야 합니다!

```markdown
# 기능명

## 기능 개요

한 문장으로 기능을 설명

## 상세 요구사항

### 1. 기능명 1

1.1. 하위 요구사항 1

- 구체적인 내용 설명
- 입력/출력 명시

  1.2. 하위 요구사항 2

- 구체적인 내용 설명
- 행동/결과 명시

### 2. 기능명 2

2.1. 하위 요구사항 1

- 구체적인 내용 설명

### 3. 기능명 3

3.1. 하위 요구사항 1
...

### 특수 케이스

1. 예외 상황 1: 상세 설명
2. 예외 상황 2: 상세 설명
3. 경계 조건 1: 상세 설명

### 에러 처리

1. 에러 상황 1: 처리 방법
2. 에러 상황 2: 처리 방법

### 제약사항

1. 구현 제약 1
2. 구현 제약 2
3. 성능 고려사항

## 기술적 맥락

- 언어, 프레임워크 등 기술 스택
- 기존 코드베이스와의 연관성
```

### 번호 매기기 규칙 (필수)

1. **최상위 섹션**: 1, 2, 3... (### 1. 기능명)
2. **하위 섹션**: 1.1, 1.2, 2.1... (#### 1.1. 하위 기능명)
3. **세부 항목**: 1.1.1, 1.1.2, 1.2.1... (##### 1.1.1. 세부 항목)
4. **리스트**: 1), 2), 3)... 또는 -, \*, + 기호 사용

**예시**:

```
### 1. 일정 추가 기능

1.1. 기본 일정 추가
- 제목, 날짜, 시간 입력
- 유효성 검증

1.2. 고급 옵션
- 반복 설정
- 알림 설정

### 2. 일정 수정 기능

2.1. 기본 정보 수정
2.2. 시간 수정
```

## 작성 규칙

- **명확성**: 각 요구사항은 독립적으로 이해 가능해야 함
- **구체성**: "사용자가 ...하면 ...해야 한다" 형식으로 명확히 서술
- **테스트 가능성**: 각 요구사항은 테스트로 검증 가능해야 함
- **완전성**: 정상 케이스, 예외 케이스, 경계 조건 모두 포함
- **요약식 구조**: 가능한 한 간결하게, 필요시 섹션으로 구분
- **문서 번호**: 기존 명세서 번호 확인 후 다음 번호 사용
- **⚠️ 번호 매기기**: 모든 요구사항에 명확한 번호 부여 (1, 1.1, 1.2.3 형식)
  - 최상위: ### 1. 기능명, ### 2. 기능명
  - 하위: #### 1.1. 하위 기능명, #### 1.2. 하위 기능명
  - 세부: ##### 1.1.1. 세부 항목, ##### 1.1.2. 세부 항목
  - 각 섹션마다 순차적으로 번호 부여

## 정보 부족 시 질의 가이드

명세가 모호하거나 불완전할 경우 다음 관점에서 질문:

1. **사용자 관점**: 누가, 무엇을, 왜 하는가?
2. **입력 데이터**: 어떤 데이터가 필요한가? (형식, 제약조건)
3. **출력/결과**: 결과가 무엇인가? 어떻게 표시되는가?
4. **예외 처리**: 에러 상황은? 어떻게 처리하는가?
5. **동작 방식**: 내부 로직의 세부사항은?
6. **기술적 요구사항**: 특정 기술, 성능 요구사항이 있는가?
7. **경계 조건**: 최소/최대값, 특수한 케이스는?
8. **기존 기능 연관**: 기존 기능과의 관계는?

질문 예시:

- "이 기능은 모든 일정에 적용되나요, 아니면 특정 조건의 일정만 해당되나요?"
- "반복 주기의 최대 범위는 어느 정도인가요?"
- "에러 발생 시 사용자에게 어떤 피드백을 제공하나요?"

## 예시 항목 (필요시 포함)

### 사용자 스토리

- 역할: 어떤 사용자인가
- 행동: 무엇을 하는가
- 목적: 왜 하는가

### 수락 기준

- Given: 전제 조건
- When: 행동
- Then: 기대 결과

### 기술적 제약

- 성능 요구사항
- 보안 요구사항
- 호환성 요구사항
- 사용 기술 스택
